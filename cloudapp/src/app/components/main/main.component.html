<!-- Loading Spinner -->
<div class="loading-shade" *ngIf="loading">
    <mat-spinner diameter="50"></mat-spinner>
</div>

<!-- Navigation header -->
<app-navigationheader [title]="'Main.Title' | translate"  [showBackButton]="false"></app-navigationheader>

<!-- User Permission Denied -->
<ng-container *ngIf="isUserCheckDone && !isUserAllowed">
    <h1>Access Denied</h1>
    <p>You are not allowed to access this page.</p>
    <p>Only users with the role "SLSKey Admin" are allowed to access this page.</p>
    <p>If you think this is an error, please contact the SLSKey Admin.</p>
</ng-container>

<!-- User Allowed: Show Entities -->
<ng-container
    *ngIf="isUserCheckDone && isUserAllowed">

    <!-- No Entities visible in Alma UI -->
    <ng-container *ngIf="(entities$ | async)?.length == 0">
        <h1>Welcome to the SLSKey Cloud App!</h1>
        <p>Steps to activate a user for SLSKey:</p>
        <ul>
            <li>Search for the user you want to activate</li>
            <li>Open this Cloud App</li>
            <li>Select the user and continue with the activation</li>
        </ul>
        <div class="highlight">Search for the user you want to activate in the Alma UI.</div>
    </ng-container>

    <!-- Entity Selection -->
    <ng-container *ngIf="(entities$ | async)?.length > 0">
        <div *ngIf="!selectedEntity">
            <mat-radio-group aria-labelledby="entities-radio-group-label" class="entities-radio-group" [(ngModel)]="selectedEntity" (change)="entitySelected($event)">
                <mat-radio-button *ngFor="let entity of entities$ | async" [value]="entity">
                    {{entity.description}}
                </mat-radio-button>
            </mat-radio-group>
        </div>
    </ng-container>
</ng-container>
